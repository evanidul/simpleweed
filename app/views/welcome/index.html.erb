<% content_for :head do %>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>		
<% end %>
	<span id = "home-page-search-container">		
		<%= form_tag(stores_path, :method => "get", class: "navbar-form navbar-left", id: "search-form") do %>
	        <div class="form-group">
	          <!-- <input type="text" class="form-control" placeholder="Search"> -->
	          <%= text_field_tag :search, params[:search], class: "form-control", placeholder: "Find weed" %>
	        </div>
	        <button id="submit-search" type="submit" class="btn btn-default">Search</button>
	        
	          <% end %>
        
      	</form>
	</span>

	<div id="homepage-map"></div>
			
			<script type="text/javascript">

	  			function codeAddress() {
					    //In this case it gets the address from an element on the page, but obviously you  could just pass it to the method instead

					    geocoder = new google.maps.Geocoder();
					    //var address = "7110 Rock Valley Court, San Diego, CA 92122";
					    var address = "la, ca";

					    geocoder.geocode( { 'address': address}, function(results, status) {
					      if (status == google.maps.GeocoderStatus.OK) {
					        //In this case it creates a marker, but you can get the lat and lng from the location.LatLng
					        console.log(results[0].geometry.location);
							var myOptions = {
								zoom:15,
								center: new google.maps.LatLng(results[0].geometry.location),
								mapTypeId: google.maps.MapTypeId.ROADMAP
							}
					        map = new google.maps.Map(document.getElementById("homepage-map"), myOptions);
					        map.setCenter(results[0].geometry.location);
					        var marker = new google.maps.Marker({
					            map: map, 
					            position: results[0].geometry.location,				            
					        });
					        						
					      } else {
					        alert("Geocode was not successful for the following reason: " + status);
					      }
					    });
					  }
				google.maps.event.addDomListener(window, "load", codeAddress);
				
			</script>
	

	